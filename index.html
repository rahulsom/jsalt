<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="Rahul Somasunderam">
<title>JS/Alt</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>JS/Alt</h1>
<div class="details">
<span id="author" class="author">Rahul Somasunderam</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_the_problems">The problems</a></li>
<li><a href="#_the_use_cases">The use cases</a></li>
<li><a href="#_the_format">The format</a></li>
<li><a href="#_the_contenders">The Contenders</a>
<ul class="sectlevel2">
<li><a href="#_classic_javascript_es_5">Classic Javascript (ES 5)</a></li>
<li><a href="#_modern_javascript_es_6">Modern Javascript (ES 6)</a></li>
<li><a href="#_coffeescript">Coffeescript</a></li>
<li><a href="#_grooscript">Grooscript</a></li>
<li><a href="#_scala_js">scala.js</a></li>
<li><a href="#_purescript">Purescript</a></li>
<li><a href="#_clojurescript">Clojurescript</a></li>
<li><a href="#_typescript">Typescript</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In talking to a lot of Javascript developers over the course of the last few months, I learnt that most hated the limits placed on them by javascript.
I found myself cursing every time I needed to do some very basic tasks.
Most of this led back to a rather old decision to not use transpilers when we started our very first SPA.
This project is an attempt to find out what we could be doing instead of fighting hard against javascript.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_problems">The problems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Javascript pretends to be a functional language</p>
</li>
<li>
<p>Javascript pretends to be an object oriented language</p>
</li>
<li>
<p>Javascript was introduced in 1995, and has never broken backwards compatibility.
<em>Even when bad decisions were made.</em></p>
</li>
<li>
<p>Javascript has <span class="line-through">optional</span> <strong>no</strong> typing.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_use_cases">The use cases</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Calling utility methods that accept functions as arguments</p>
</li>
<li>
<p>Creating "class"es and accessing static and instance methods</p>
</li>
<li>
<p>Dealing with some javascript eccentricities</p>
</li>
<li>
<p>Managing types</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_format">The format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll see code that is picked from tested examples over here.
There will be callouts that point out interesting things.
Some are positive, some are negative, while others are just plain interesting.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_contenders">The Contenders</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_classic_javascript_es_5">Classic Javascript (ES 5)</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-s1">&#39;use strict&#39;</span><span class="tok-p">;</span> <i class="conum" data-value="1"></i><b>(1)</b>


<span class="tok-cm">/**</span>
<span class="tok-cm"> * A factory that offers factorial methods</span>
<span class="tok-cm"> */</span>
<span class="tok-kd">var</span> <span class="tok-nx">TaylorClassic</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tok-kd">function</span> <span class="tok-nx">TaylorClassic</span><span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-p">}</span> <i class="conum" data-value="3"></i><b>(3)</b>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Computes the p-th power of num</span>
<span class="tok-cm">   * @param {number} num the number</span>
<span class="tok-cm">   * @param {int} p the number</span>
<span class="tok-cm">   * @return {number} the power</span>
<span class="tok-cm">   */</span>
  <span class="tok-nx">TaylorClassic</span><span class="tok-p">.</span><span class="tok-nx">prototype</span><span class="tok-p">.</span><span class="tok-nx">pow</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span><span class="tok-p">)</span> <span class="tok-p">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">p</span> <span class="tok-o">===</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
      <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span> <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
      <span class="tok-k">return</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-p">}</span> <span class="tok-k">else</span> <span class="tok-p">{</span>
      <span class="tok-k">return</span> <span class="tok-mi">1</span> <span class="tok-o">/</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
  <span class="tok-p">};</span>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Computes the factorial of a number</span>
<span class="tok-cm">   * @param {int} x the number </span><i class="conum" data-value="5"></i><b>(5)</b>
<span class="tok-cm">   * @return {int} the factorial</span>
<span class="tok-cm">   */</span>
  <span class="tok-nx">TaylorClassic</span><span class="tok-p">.</span><span class="tok-nx">prototype</span><span class="tok-p">.</span><span class="tok-nx">fact</span> <span class="tok-o">=</span> <span class="tok-kd">function</span> <span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">0</span> <span class="tok-o">?</span> <span class="tok-mi">1</span> <span class="tok-o">:</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
  <span class="tok-p">};</span>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Computes the sine of an angle</span>
<span class="tok-cm">   * @param {number} x the angle</span>
<span class="tok-cm">   * @return {number} the sine</span>
<span class="tok-cm">   */</span>
  <span class="tok-nx">TaylorClassic</span><span class="tok-p">.</span><span class="tok-nx">prototype</span><span class="tok-p">.</span><span class="tok-nx">sine</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-kd">var</span> <span class="tok-nx">_this</span> <span class="tok-o">=</span> <span class="tok-k">this</span><span class="tok-p">;</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="tok-k">return</span> <span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">reduce</span><span class="tok-p">(</span><span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">range</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">10</span><span class="tok-p">),</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">sum</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-p">{</span> <i class="conum" data-value="7"></i><b>(7)</b> <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tok-k">return</span> <span class="tok-nx">sum</span> <span class="tok-o">+</span> <span class="tok-nx">_this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-nx">_this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">/</span> <span class="tok-nx">_this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">);</span> <i class="conum" data-value="9"></i><b>(9)</b>
    <span class="tok-p">},</span> <span class="tok-mf">0.0</span><span class="tok-p">);</span>
  <span class="tok-p">};</span>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Returns a singleton of the TaylorClassic</span>
<span class="tok-cm">   * @return {TaylorClassic}</span>
<span class="tok-cm">   */</span>
  <span class="tok-nx">TaylorClassic</span><span class="tok-p">.</span><span class="tok-nx">getInstance</span> <span class="tok-o">=</span> <span class="tok-kd">function</span> <span class="tok-nx">getInstance</span><span class="tok-p">()</span> <span class="tok-p">{</span> <i class="conum" data-value="10"></i><b>(10)</b>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span><span class="tok-p">)</span> <span class="tok-p">{</span> <i class="conum" data-value="11"></i><b>(11)</b>
      <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nx">TaylorClassic</span><span class="tok-p">();</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span><span class="tok-p">;</span>
  <span class="tok-p">};</span>

  <span class="tok-k">return</span> <span class="tok-nx">TaylorClassic</span><span class="tok-p">;</span> <i class="conum" data-value="12"></i><b>(12)</b>
<span class="tok-p">})();</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is a tip of the hat to the weird history of javascript and the reluctance to do away with bad implementations.
As we&#8217;ll later see, this is not as strict as we want it to be.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is a secret handshake between the developer and the browser that <strong>this</strong> is a <code>class</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This is the constructor, and it does nothing, but it can be modified in several steps below.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>prototype</code> feels like you&#8217;re mucking with a meta object. Indeed, that&#8217;s how javascript wants you to deal with
classes.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>As you&#8217;ve probably noticed by now, there are no types to parameters or return values.
Javascript does not impose any restrictions inspite of having classes we&#8217;ve seen earlier.
The solution to getting type information in the IDE is use of JSDoc.
You might be tempted to think there is Haskell style type inference.
Do not fall for that trap. Things can go from bad to worse pretty soon once a method is called incorrectly.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>There is no sane definition of <code>this</code> since classes are just functions.
So what <code>this</code> means depends on where it is used. In this case, it&#8217;s an instance of <code>FactorialUtilClassic</code>.
An experienced javascript developer would know this by instinct, but still fall for it&#8217;s traps.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Here we&#8217;re using lodash or underscore or some library that offers a functional style of programming.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>This is the boilerplate required to call reduce</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>If you forget the <code>return</code> keyword, the function is assumed to return <code>void</code>. There is no warning.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>This is a static function. The clue is, there&#8217;s no <code>prototype</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><code>this</code> means the <code>class</code> over here.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>We return the function from &lt;3&gt; over here. That is the instance returned to the call <code>new FactorialUtilClassic</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-nx">describe</span><span class="tok-p">(</span><span class="tok-s1">&#39;Taylor Classic Spec&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">return</span> <span class="tok-nx">it</span><span class="tok-p">(</span><span class="tok-s1">&#39;calls, values and instances match&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-kd">var</span> <span class="tok-nx">taylor</span> <span class="tok-o">=</span> <span class="tok-nx">TaylorClassic</span><span class="tok-p">.</span><span class="tok-nx">getInstance</span><span class="tok-p">();</span>
    <span class="tok-kd">var</span> <span class="tok-nx">PI</span> <span class="tok-o">=</span> <span class="tok-mf">3.14159265359</span><span class="tok-p">;</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.25</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.5</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">4</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">6</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">4</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.707</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.866</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">1.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
  <span class="tok-p">});</span>
<span class="tok-p">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modern_javascript_es_6">Modern Javascript (ES 6)</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="js"><span class="tok-cm">/**</span>
<span class="tok-cm"> * A factory that offers factorial methods</span>
<span class="tok-cm"> */</span>
<span class="tok-kr">class</span> <span class="tok-nx">TaylorModern</span> <span class="tok-p">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Computes the p-th power of num</span>
<span class="tok-cm">   * @param {number} num the number</span>
<span class="tok-cm">   * @param {int} p the number</span>
<span class="tok-cm">   * @return {number} the power</span>
<span class="tok-cm">   */</span>
  <span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">p</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-k">else</span> <span class="tok-k">return</span> <span class="tok-mi">1</span> <span class="tok-o">/</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
  <span class="tok-p">}</span>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Computes the factorial of a number</span>
<span class="tok-cm">   * @param {int} x the number</span>
<span class="tok-cm">   * @return {int} the factorial</span>
<span class="tok-cm">   */</span>
  <span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">0</span> <span class="tok-o">?</span> <span class="tok-mi">1</span> <span class="tok-o">:</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
  <span class="tok-p">}</span>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Computes the sine of an angle</span>
<span class="tok-cm">   * @param {number} x the angle</span>
<span class="tok-cm">   * @return {number} the sine</span>
<span class="tok-cm">   */</span>

  <span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">_</span>
        <span class="tok-p">.</span><span class="tok-nx">chain</span><span class="tok-p">(</span><span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">range</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">10</span><span class="tok-p">))</span>
        <span class="tok-p">.</span><span class="tok-nx">reduce</span><span class="tok-p">((</span><span class="tok-nx">sum</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-o">=&gt;</span> <span class="tok-nx">sum</span> <span class="tok-o">+</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">/</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">),</span> <span class="tok-mf">0.0</span><span class="tok-p">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tok-p">}</span>

  <span class="tok-nx">constructor</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-p">;</span>  <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tok-p">}</span>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * Returns a singleton of the TaylorModern</span>
<span class="tok-cm">   * @return {TaylorModern}</span>
<span class="tok-cm">   */</span>
  <span class="tok-kr">static</span> <span class="tok-nx">getInstance</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span><span class="tok-p">)</span> <span class="tok-p">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nx">TaylorModern</span><span class="tok-p">();</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span><span class="tok-p">;</span>
  <span class="tok-p">}</span>

<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>There is native support for classes.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Arrow functions look a lot like Lambda Calculus, and have a saner implementation of <code>this</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>There is support for <code>static</code> members in classes.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>You still use <code>this</code> inside static members.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="js"><span class="tok-nx">describe</span><span class="tok-p">(</span><span class="tok-s1">&#39;Taylor Modern Spec&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">return</span> <span class="tok-nx">it</span><span class="tok-p">(</span><span class="tok-s1">&#39;calls, values and instances match&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-kd">var</span> <span class="tok-nx">taylor</span> <span class="tok-o">=</span> <span class="tok-nx">TaylorModern</span><span class="tok-p">.</span><span class="tok-nx">getInstance</span><span class="tok-p">();</span>
    <span class="tok-kd">var</span> <span class="tok-nx">PI</span> <span class="tok-o">=</span> <span class="tok-mf">3.14159265359</span><span class="tok-p">;</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.25</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.5</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">4</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">6</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">4</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.707</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.866</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">1.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
  <span class="tok-p">});</span>
<span class="tok-p">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_coffeescript">Coffeescript</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="coffeescript"><span class="tok-s">&#39;use strict&#39;</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="tok-cm">###* </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-cm"># A factory that offers factorial methods</span>
<span class="tok-cm">###</span>
<span class="tok-k">class</span> <span class="tok-nx">TaylorCoffee</span> <i class="conum" data-value="3"></i><b>(3)</b>

  <span class="tok-cm">###*</span>
<span class="tok-cm">  # Computes the p-th power of num</span>
<span class="tok-cm">  # @param num {number} the number</span>
<span class="tok-cm">  # @param p {int} the number</span>
<span class="tok-cm">  # @return {number} the power</span>
<span class="tok-cm">  ###</span>
  <span class="tok-nv">pow: </span><span class="tok-nf">(num, p) -&gt;</span>
    <span class="tok-k">if</span> <span class="tok-nx">p</span> <span class="tok-o">==</span> <span class="tok-mi">0</span> <span class="tok-k">then</span> <span class="tok-mi">1</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-nx">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span> <span class="tok-k">then</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-nx">@pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
    <span class="tok-k">else</span> <span class="tok-mi">1</span><span class="tok-o">/</span><span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-nx">@pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span><span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-p">)</span>

  <span class="tok-cm">###*</span>
<span class="tok-cm">  # Computes the factorial of a number</span>
<span class="tok-cm">  # @param x {int} the number</span>
<span class="tok-cm">  # @return {int} the factorial</span>
<span class="tok-cm">  ###</span>
  <span class="tok-nv">fact: </span><span class="tok-nf">(x) -&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tok-k">if</span> <span class="tok-nx">x</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">0</span> <span class="tok-k">then</span> <span class="tok-mi">1</span> <span class="tok-k">else</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-nx">@fact</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <i class="conum" data-value="5"></i><b>(5)</b>

  <span class="tok-cm">###*</span>
<span class="tok-cm">  # Computes the sine of an angle</span>
<span class="tok-cm">  # @param x {number} the angle</span>
<span class="tok-cm">  # @return {number} the sine</span>
<span class="tok-cm">  ###</span>
  <span class="tok-nv">sine: </span><span class="tok-nf">(x) -&gt;</span>
    <span class="tok-nv">_this = </span><span class="tok-nx">@</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="tok-nv">reducer = </span><span class="tok-nf">(sum, i) -&gt;</span>
      <span class="tok-nx">sum</span> <span class="tok-o">+</span>
        <span class="tok-nx">_this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-nx">_this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">/</span> <span class="tok-nx">_this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">reduce</span><span class="tok-p">(</span><span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">range</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">10</span><span class="tok-p">),</span> <span class="tok-nx">reducer</span><span class="tok-p">,</span> <span class="tok-mf">0.0</span><span class="tok-p">)</span> <i class="conum" data-value="8"></i><b>(8)</b>

  <span class="tok-cm">###*</span>
<span class="tok-cm">  # Returns a singleton of the FactorialUtil</span>
<span class="tok-cm">  # @return {FactorialUtil}</span>
<span class="tok-cm">  ###</span>
  <span class="tok-vi">@getInstance = </span><span class="tok-nf">-&gt;</span>
    <span class="tok-k">if</span> <span class="tok-o">!</span><span class="tok-nx">@_instance</span>
      <span class="tok-vi">@_instance = </span><span class="tok-k">new</span> <span class="tok-nx">TaylorCoffee</span>
    <span class="tok-nx">@_instance</span> <i class="conum" data-value="9"></i><b>(9)</b>

<span class="tok-nb">window</span><span class="tok-p">.</span><span class="tok-nv">TaylorCoffee = </span><span class="tok-nx">TaylorCoffee</span> <i class="conum" data-value="9"></i><b>(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is based on ES5, so you still need to enforce strict mode</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It is based on Ruby and Python so indents matter and comments are <code>#</code> based</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You have native classes</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is a function defined as a property, which in case of class is a public method</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>It is not immediately clear in this case, but if is not a statement, but an expression in coffeescript.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>@</code> is used to mapped to <code>this</code> or <code>this.</code> in javascript. Makes for concise code more than you would think.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>There is still a lambda-esque function here, but coffeescript functions always remind you of lambdas.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The last statement is always a return</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Depending on the implementation of Coffeescript, the whole function could be inside of an anonymous function or not.
So if you want to export the class, you better explicitly do that.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="coffeescript"><span class="tok-nx">describe</span> <span class="tok-s">&#39;Taylor Coffee Spec&#39;</span><span class="tok-p">,</span> <span class="tok-nf">-&gt;</span>
  <span class="tok-nx">it</span> <span class="tok-s">&#39;calls, values and instances match&#39;</span><span class="tok-p">,</span> <span class="tok-nf">-&gt;</span>
    <span class="tok-nv">taylor = </span><span class="tok-nx">TaylorCoffee</span><span class="tok-p">.</span><span class="tok-nx">getInstance</span><span class="tok-p">()</span>
    <span class="tok-nv">PI = </span><span class="tok-mf">3.14159265359</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mf">0.25</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mf">0.5</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">1</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">2</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">4</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">1</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">1</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">2</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mi">6</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span> <span class="tok-mf">0.0</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-o">/</span><span class="tok-mi">4</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span> <span class="tok-mf">0.707</span><span class="tok-p">,</span> <span class="tok-mi">3</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-o">/</span><span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span> <span class="tok-mf">0.866</span><span class="tok-p">,</span> <span class="tok-mi">3</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-o">/</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span> <span class="tok-mf">1.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span> <span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The test is perhaps where coffeescript excels in demonstrating it&#8217;s conciseness.</p>
</div>
</div>
<div class="sect2">
<h3 id="_grooscript">Grooscript</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">jsalt</span><span class="tok-o">.</span><span class="tok-na">groovy</span>

<span class="tok-kn">import</span> <span class="tok-nn">groovy.transform.CompileStatic</span>
<span class="tok-kn">import</span> <span class="tok-nn">groovy.transform.Memoized</span>
<span class="tok-kn">import</span> <span class="tok-nn">groovy.transform.TypeChecked</span>

<span class="tok-cm">/**</span>
<span class="tok-cm"> * Utility to work with factorials</span>
<span class="tok-cm"> */</span>
<span class="tok-nd">@CompileStatic</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-nd">@TypeChecked</span>
<span class="tok-kd">class</span> <span class="tok-nc">TaylorGroovy</span> <span class="tok-o">{</span>

  <span class="tok-kt">double</span> <span class="tok-nf">pow</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">num</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">p</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">p</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-mi">1</span>
    <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-n">num</span> <span class="tok-o">*</span> <span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-n">num</span><span class="tok-o">,</span> <span class="tok-n">p</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">)</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tok-k">else</span> <span class="tok-mi">1</span> <span class="tok-s">/ num * pow(num, p + 1)</span>
<span class="tok-s">  }</span>

<span class="tok-s">  long fact(long x) {</span>
<span class="tok-s">    x &gt; 0 ? x * fact(x - 1) : 1</span>
<span class="tok-s">  }</span>

<span class="tok-s">  double sine(double x) {</span>
<span class="tok-s">    (0..10).inject(0.0) { sum, i -&gt;</span>
<span class="tok-s">      sum + pow(-1, i) * pow(x, i * 2 + 1) /</span> <span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
    <span class="tok-o">}</span> <span class="tok-k">as</span> <span class="tok-kt">double</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">static</span> <span class="tok-n">TaylorGroovy</span> <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-kc">null</span> <i class="conum" data-value="2"></i><b>(2)</b>

  <span class="tok-cm">/**</span>
<span class="tok-cm">   * A poor man&#39;s singleton. This is not thread safe.</span>
<span class="tok-cm">   * But the joke is on threads, because javascript has only one thread</span>
<span class="tok-cm">   *</span>
<span class="tok-cm">   * @return the singleton</span>
<span class="tok-cm">   */</span>
  <span class="tok-kd">static</span> <span class="tok-n">TaylorGroovy</span> <span class="tok-nf">getInstance</span><span class="tok-o">()</span> <span class="tok-o">{</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-n">instance</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TaylorGroovy</span><span class="tok-o">()</span>
    <span class="tok-o">}</span>
    <span class="tok-n">instance</span>
  <span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Within Groovy code, you can use Static compilation and type checking</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can have typed variables</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Typed functions</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>There is no <code>this</code> scattered in a confusing way. But the implementation of <code>this</code> is as sane as <code>groovy</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Some ASTs like <code>@Singleton</code> are not allowed</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">jsalt</span><span class="tok-o">.</span><span class="tok-na">groovy</span>

<span class="tok-kn">import</span> <span class="tok-nn">spock.lang.Specification</span>

<span class="tok-kd">class</span> <span class="tok-nc">TaylorGroovySpec</span> <span class="tok-kd">extends</span> <span class="tok-n">Specification</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">BigDecimal</span> <span class="tok-n">PI</span> <span class="tok-o">=</span> <span class="tok-mf">3.14159265359</span>

  <span class="tok-kt">def</span> <span class="tok-s2">&quot;calls, values and instances match&quot;</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-kt">def</span> <span class="tok-n">taylor</span> <span class="tok-o">=</span> <span class="tok-n">TaylorGroovy</span><span class="tok-o">.</span><span class="tok-na">instance</span>
    <span class="tok-nl">expect:</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mf">0.25</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mf">0.5</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">1</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">2</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">4</span>

    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">fact</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">1</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">fact</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">1</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">fact</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">2</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">fact</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">6</span>

    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">sine</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mf">0.0</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">sine</span><span class="tok-o">(</span><span class="tok-n">PI</span> <span class="tok-s">/ 4) &gt; 0.707 &amp;&amp; taylor.sine(PI /</span> <span class="tok-mi">4</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.708</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">sine</span><span class="tok-o">(</span><span class="tok-n">PI</span> <span class="tok-s">/ 3) &gt; 0.866 &amp;&amp; taylor.sine(PI /</span> <span class="tok-mi">3</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.867</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">sine</span><span class="tok-o">(</span><span class="tok-n">PI</span> <span class="tok-s">/ 2) &gt; 0.999 &amp;&amp; taylor.sine(PI /</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">1.001</span>
    <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">sine</span><span class="tok-o">(</span><span class="tok-n">PI</span><span class="tok-o">)</span> <span class="tok-o">&gt;</span> <span class="tok-o">-</span><span class="tok-mf">0.001</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-na">sine</span><span class="tok-o">(</span><span class="tok-n">PI</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.001</span>

  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We are using Spock to test the code</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The assertions are much nicer than jasmine</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Jasmine&#8217;s <code>toBeCloseTo</code> is missed</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_scala_js">scala.js</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="scala"><span class="tok-k">import</span> <span class="tok-nn">scala.scalajs.js.annotation.JSExport</span>

<span class="tok-k">class</span> <span class="tok-nc">TaylorScala</span> <span class="tok-o">{</span>

  <span class="tok-k">def</span> <span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-k">:</span> <span class="tok-kt">Long</span><span class="tok-o">)</span><span class="tok-k">:</span> <span class="tok-kt">Long</span> <span class="tok-o">=</span> <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-n">x</span> <span class="tok-o">*</span> <span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-k">else</span> <span class="tok-mi">1</span> <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>

  <span class="tok-k">def</span> <span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-n">num</span><span class="tok-k">:</span> <span class="tok-kt">Double</span><span class="tok-o">,</span> <span class="tok-n">p</span><span class="tok-k">:</span> <span class="tok-kt">Int</span><span class="tok-o">)</span><span class="tok-k">:</span> <span class="tok-kt">Double</span> <span class="tok-o">=</span> <span class="tok-o">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">p</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-mi">1</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-n">num</span> <span class="tok-o">*</span> <span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-n">num</span><span class="tok-o">,</span> <span class="tok-n">p</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
    <span class="tok-k">else</span> <span class="tok-mi">1</span> <span class="tok-o">/</span> <span class="tok-n">num</span> <span class="tok-o">*</span> <span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-n">num</span><span class="tok-o">,</span> <span class="tok-n">p</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
  <span class="tok-o">}</span>

  <span class="tok-k">def</span> <span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-k">:</span> <span class="tok-kt">Double</span><span class="tok-o">)</span> <span class="tok-k">=</span> <span class="tok-nc">Range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">)</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tok-o">.</span><span class="tok-n">foldLeft</span><span class="tok-o">(</span><span class="tok-mf">0.0</span><span class="tok-o">)(</span>
      <span class="tok-o">(</span><span class="tok-n">sum</span><span class="tok-o">,</span> <span class="tok-n">i</span><span class="tok-o">)</span> <span class="tok-k">=&gt;</span> <span class="tok-n">sum</span> <span class="tok-o">+</span> <span class="tok-n">pow</span><span class="tok-o">(-</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-n">i</span><span class="tok-o">)</span> <span class="tok-o">*</span> <span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">/</span> <span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
    <span class="tok-o">)</span>

<span class="tok-o">}</span>

<span class="tok-nd">@JSExport</span> <i class="conum" data-value="6"></i><b>(6)</b>
<span class="tok-k">object</span> <span class="tok-nc">TaylorScala</span> <span class="tok-o">{</span>
  <span class="tok-k">private</span> <span class="tok-k">var</span> <span class="tok-n">instance</span><span class="tok-k">:</span> <span class="tok-kt">TaylorScala</span> <span class="tok-o">=</span> <span class="tok-kc">null</span>

  <span class="tok-k">def</span> <span class="tok-n">getInstance</span><span class="tok-o">()</span> <span class="tok-k">=</span> <span class="tok-o">{</span> <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">instance</span> <span class="tok-o">==</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">instance</span> <span class="tok-k">=</span> <span class="tok-k">new</span> <span class="tok-nc">TaylorScala</span>
    <span class="tok-o">}</span>
    <span class="tok-n">instance</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>if</code> is an expression, not a statement.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Also function bodies without <code>{}</code> are common.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Since we&#8217;re using recursion, we need to be very clear about the signature inspite of advanced type inference.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is a method body with <code>{}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Also Scala infers the return of this method. It is not <code>Object</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>ScalaJs is very aggressive in optimizing generated javascript. We need to tell it what we will be using from
outside unless we have a <code>JSApp</code> with a <code>main</code> method.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>More demo of advanced type inference.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="scala"><span class="tok-k">import</span> <span class="tok-nn">org.junit.runner.RunWith</span>
<span class="tok-k">import</span> <span class="tok-nn">org.scalatest._</span>
<span class="tok-k">import</span> <span class="tok-nn">org.scalatest.junit.JUnitRunner</span>

<span class="tok-c1">// import scala.collection.immutable.List </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="tok-nd">@RunWith</span><span class="tok-o">(</span><span class="tok-n">classOf</span><span class="tok-o">[</span><span class="tok-kt">JUnitRunner</span><span class="tok-o">])</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-k">class</span> <span class="tok-nc">TaylorScalaSpec</span> <span class="tok-k">extends</span> <span class="tok-nc">FunSuite</span> <span class="tok-o">{</span>
  <span class="tok-k">final</span> <span class="tok-k">val</span> <span class="tok-nc">PI</span> <span class="tok-k">=</span> <span class="tok-mf">3.14159265359</span>
  <span class="tok-n">test</span><span class="tok-o">(</span><span class="tok-s">&quot;calls, values and instances match&quot;</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">val</span> <span class="tok-n">taylor</span> <span class="tok-k">=</span> <span class="tok-nc">TaylorScala</span><span class="tok-o">.</span><span class="tok-n">getInstance</span><span class="tok-o">()</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mf">0.25</span><span class="tok-o">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mf">0.5</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">2</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">pow</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">4</span><span class="tok-o">)</span>

    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">2</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">fact</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mi">6</span><span class="tok-o">)</span>

    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">==</span> <span class="tok-mf">0.0</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span> <span class="tok-o">/</span> <span class="tok-mi">4</span><span class="tok-o">)</span> <span class="tok-o">&gt;</span> <span class="tok-mf">0.707</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span> <span class="tok-o">/</span> <span class="tok-mi">4</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.708</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span> <span class="tok-o">/</span> <span class="tok-mi">3</span><span class="tok-o">)</span> <span class="tok-o">&gt;</span> <span class="tok-mf">0.866</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span> <span class="tok-o">/</span> <span class="tok-mi">3</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.867</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">&gt;</span> <span class="tok-mf">0.999</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">1.001</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span><span class="tok-o">)</span> <span class="tok-o">&gt;</span> <span class="tok-o">-</span><span class="tok-mf">0.001</span><span class="tok-o">)</span>
    <span class="tok-n">assert</span><span class="tok-o">(</span><span class="tok-n">taylor</span><span class="tok-o">.</span><span class="tok-n">sine</span><span class="tok-o">(</span><span class="tok-nc">PI</span><span class="tok-o">)</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.001</span><span class="tok-o">)</span>

  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is commented because it is implicit, but I&#8217;ve put it there to show by default scala collections are immutable.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We need this because we&#8217;re trying to play well with the other test written in Spock.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Assertions are almost as elegant as Spock.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_purescript">Purescript</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="haskell"><span class="tok-kr">module</span> <span class="tok-nn">TaylorPurescript</span> <span class="tok-kr">where</span>

<span class="tok-kr">import</span> <span class="tok-nn">Prelude</span>
<span class="tok-kr">import</span> <span class="tok-nn">Data.Foldable</span> <span class="tok-p">(</span><span class="tok-nf">foldl</span><span class="tok-p">)</span>
<span class="tok-kr">import</span> <span class="tok-nn">Data.Array</span> <span class="tok-p">((</span><span class="tok-o">..</span><span class="tok-p">))</span>
<span class="tok-kr">import</span> <span class="tok-nn">Data.Int</span> <span class="tok-p">(</span><span class="tok-nf">toNumber</span><span class="tok-p">)</span>
<span class="tok-kr">import</span> <span class="tok-nn">Control.Monad.Eff.Console</span> <span class="tok-p">(</span><span class="tok-nf">log</span><span class="tok-p">)</span>

<span class="tok-c1">--powImpl       :: Number -&gt; Int -&gt; Number -&gt; Number </span><i class="conum" data-value="5"></i><b>(5)</b>
<span class="tok-c1">--powImpl num p accum</span>
<span class="tok-c1">--  | p == 0    = accum</span>
<span class="tok-c1">--  | p &gt; 0     = powImpl num (p-1) (accum * num)</span>
<span class="tok-c1">--  | otherwise = powImpl num (p+1) (accum / num)</span>
<span class="tok-c1">--</span>
<span class="tok-c1">---- pow  :: Number -&gt; Int -&gt; Number</span>
<span class="tok-c1">--pow num p     = powImpl num p 1.0</span>
<span class="tok-c1">--</span>
<span class="tok-c1">--factImpl      :: Int -&gt; Number -&gt; Number</span>
<span class="tok-c1">--factImpl n accum</span>
<span class="tok-c1">--  | n == 0    = accum</span>
<span class="tok-c1">--  | n &gt; 0     = factImpl (n-1) (accum * toNumber n)</span>
<span class="tok-c1">--</span>
<span class="tok-c1">---- fact :: Int -&gt; Number</span>
<span class="tok-c1">--fact n = factImpl n 1.0</span>
<span class="tok-c1">--</span>

<span class="tok-c1">-- pow  :: Number -&gt; Int -&gt; Number </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-nf">pow</span> <span class="tok-n">num</span> <span class="tok-n">p</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tok-o">|</span> <span class="tok-n">p</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>    <span class="tok-ow">=</span> <span class="tok-mf">1.0</span>
  <span class="tok-o">|</span> <span class="tok-n">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span>     <span class="tok-ow">=</span> <span class="tok-n">num</span>     <span class="tok-o">*</span> <span class="tok-n">pow</span> <span class="tok-n">num</span> <span class="tok-p">(</span><span class="tok-n">p</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)</span>
  <span class="tok-o">|</span> <span class="tok-n">otherwise</span> <span class="tok-ow">=</span> <span class="tok-mf">1.0</span><span class="tok-o">/</span><span class="tok-n">num</span> <span class="tok-o">*</span> <span class="tok-n">pow</span> <span class="tok-n">num</span> <span class="tok-p">(</span><span class="tok-n">p</span><span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-p">)</span>

<span class="tok-c1">-- fact :: Int -&gt; Number</span>
<span class="tok-nf">fact</span> <span class="tok-mi">0</span> <span class="tok-ow">=</span> <span class="tok-mf">1.0</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="tok-nf">fact</span> <span class="tok-n">n</span> <span class="tok-ow">=</span> <span class="tok-n">toNumber</span> <span class="tok-p">(</span><span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-n">fact</span><span class="tok-p">(</span><span class="tok-n">n</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)</span>

<span class="tok-c1">-- sine :: Number -&gt; Number</span>
<span class="tok-nf">sine</span> <span class="tok-n">x</span> <span class="tok-ow">=</span> <span class="tok-n">foldl</span> <span class="tok-p">(</span><span class="tok-o">+</span><span class="tok-p">)</span> <span class="tok-mf">0.0</span> <span class="tok-o">$</span> <span class="tok-n">map</span> <span class="tok-n">f</span> <span class="tok-p">(</span><span class="tok-mi">0</span> <span class="tok-o">..</span> <span class="tok-mi">10</span><span class="tok-p">)</span> <span class="tok-kr">where</span>
    <span class="tok-n">f</span> <span class="tok-n">i</span> <span class="tok-ow">=</span> <span class="tok-n">pow</span> <span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mf">1.0</span><span class="tok-p">)</span> <span class="tok-n">i</span> <span class="tok-o">*</span> <span class="tok-n">pow</span> <span class="tok-n">x</span> <span class="tok-p">(</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-mi">2</span><span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">/</span> <span class="tok-n">fact</span> <span class="tok-p">(</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-mi">2</span><span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-p">)</span>

<span class="tok-nf">main</span> <span class="tok-ow">=</span> <span class="tok-n">log</span> <span class="tok-s">&quot;Hello&quot;</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This line is commented out, but conventionally it would be there. It demonstrates Purescript&#8217;s type inference.
Purely on the basis of the operations performed inside of it, it will guess exactly the same type as I had intended.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is a function defined using guard values</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This is a function defined using pattern matching</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This appears necessary for the module to be taken seriously by the compiler</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The commented block is better performing code. It uses tail call optimization. If you need it, you should use it.
TCO is almost a must-have if you want to use quickcheck</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="haskell"><span class="tok-kr">module</span> <span class="tok-nn">Test.Main</span> <span class="tok-kr">where</span>

<span class="tok-kr">import</span> <span class="tok-nn">TaylorPurescript</span>
<span class="tok-kr">import</span> <span class="tok-nn">Math</span> <span class="tok-p">(</span><span class="tok-nf">abs</span><span class="tok-p">)</span>
<span class="tok-kr">import</span> <span class="tok-nn">Prelude</span>
<span class="tok-kr">import</span> <span class="tok-nn">Control.Monad.Eff</span>
<span class="tok-kr">import</span> <span class="tok-nn">Control.Monad.Eff.Console</span>
<span class="tok-kr">import</span> <span class="tok-nn">Data.Int</span> <span class="tok-p">(</span><span class="tok-nf">toNumber</span><span class="tok-p">,</span> <span class="tok-nf">round</span><span class="tok-p">)</span>


<span class="tok-kr">import</span> <span class="tok-nn">Test.Unit</span> <span class="tok-p">(</span><span class="tok-nf">test</span><span class="tok-p">,</span> <span class="tok-nf">runTest</span><span class="tok-p">)</span>
<span class="tok-kr">import</span> <span class="tok-nn">Test.Unit.QuickCheck</span> <span class="tok-p">(</span><span class="tok-nf">quickCheck</span><span class="tok-p">)</span>
<span class="tok-kr">import</span> <span class="tok-nn">Test.QuickCheck</span> <span class="tok-p">(</span><span class="tok-kt">Result</span><span class="tok-p">(),</span> <span class="tok-p">(</span><span class="tok-o">===</span><span class="tok-p">))</span>
<span class="tok-kr">import</span> <span class="tok-nn">Test.Unit.Assert</span> <span class="tok-k">as</span> <span class="tok-n">Assert</span>

<span class="tok-c1">-- pi :: Number</span>
<span class="tok-nf">pi</span> <span class="tok-ow">=</span> <span class="tok-mf">3.14159265359</span>

<span class="tok-c1">--powersCascade :: Number -&gt; Int -&gt; Result </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-c1">--powersCascade a b = (pow a (b+1)) === ((pow a b)*a)</span>
<span class="tok-c1">--</span>
<span class="tok-c1">--factsCascade :: Int -&gt; Result</span>
<span class="tok-c1">--factsCascade a = (fact (b+1)) === (fact b * toNumber(b+1)) where</span>
<span class="tok-c1">--  b = round $ abs $ toNumber a</span>
<span class="tok-c1">--</span>
<span class="tok-nf">main</span> <span class="tok-ow">=</span> <span class="tok-n">runTest</span> <span class="tok-kr">do</span>
<span class="tok-c1">--  test &quot;quickCheck pow function&quot; do</span>
<span class="tok-c1">--    quickCheck powersCascade </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-c1">--</span>
<span class="tok-c1">--  test &quot;quickCheck fact function&quot; do</span>
<span class="tok-c1">--    quickCheck factsCascade</span>
<span class="tok-c1">--</span>
  <span class="tok-n">test</span> <span class="tok-s">&quot;the pow function&quot;</span> <span class="tok-kr">do</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">pow</span> <span class="tok-mf">2.0</span> <span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-p">))</span> <span class="tok-mf">0.25</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">pow</span> <span class="tok-mf">2.0</span> <span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">))</span> <span class="tok-mf">0.5</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">pow</span> <span class="tok-mf">2.0</span> <span class="tok-mi">0</span><span class="tok-p">)</span>    <span class="tok-mf">1.0</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">pow</span> <span class="tok-mf">2.0</span> <span class="tok-mi">1</span><span class="tok-p">)</span>    <span class="tok-mf">2.0</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">pow</span> <span class="tok-mf">2.0</span> <span class="tok-mi">2</span><span class="tok-p">)</span>    <span class="tok-mf">4.0</span>
  <span class="tok-n">test</span> <span class="tok-s">&quot;the fact function&quot;</span> <span class="tok-kr">do</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">fact</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-mf">1.0</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">fact</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-mf">1.0</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">fact</span> <span class="tok-mi">2</span><span class="tok-p">)</span> <span class="tok-mf">2.0</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">fact</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-mf">6.0</span>
  <span class="tok-n">test</span> <span class="tok-s">&quot;the sine function&quot;</span> <span class="tok-kr">do</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">equal</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-mf">0.0</span><span class="tok-p">)</span>      <span class="tok-mf">0.0</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">assert</span> <span class="tok-s">&quot;sin pi/4 ~= 0.707&quot;</span> <span class="tok-o">$</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-p">(</span><span class="tok-n">pi</span><span class="tok-o">/</span><span class="tok-mf">4.0</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mf">0.707</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">assert</span> <span class="tok-s">&quot;sin pi/4 ~= 0.707&quot;</span> <span class="tok-o">$</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-p">(</span><span class="tok-n">pi</span><span class="tok-o">/</span><span class="tok-mf">4.0</span><span class="tok-p">))</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.708</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">assert</span> <span class="tok-s">&quot;sin pi/3 ~= 0.866&quot;</span> <span class="tok-o">$</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-p">(</span><span class="tok-n">pi</span><span class="tok-o">/</span><span class="tok-mf">3.0</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mf">0.866</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">assert</span> <span class="tok-s">&quot;sin pi/3 ~= 0.866&quot;</span> <span class="tok-o">$</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-p">(</span><span class="tok-n">pi</span><span class="tok-o">/</span><span class="tok-mf">3.0</span><span class="tok-p">))</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.869</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">assert</span> <span class="tok-s">&quot;sin pi/2 ~= 0.707&quot;</span> <span class="tok-o">$</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-p">(</span><span class="tok-n">pi</span><span class="tok-o">/</span><span class="tok-mf">2.0</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mf">0.999</span>
    <span class="tok-kt">Assert</span><span class="tok-o">.</span><span class="tok-n">assert</span> <span class="tok-s">&quot;sin pi/2 ~= 0.707&quot;</span> <span class="tok-o">$</span> <span class="tok-p">(</span><span class="tok-n">sine</span> <span class="tok-p">(</span><span class="tok-n">pi</span><span class="tok-o">/</span><span class="tok-mf">2.0</span><span class="tok-p">))</span> <span class="tok-o">&lt;</span> <span class="tok-mf">1.001</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This defines a property for quickCheck</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is <strong>quickCheck</strong> - it runs a hundred tests with random numbers to see if the property holds true</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You need ot put negative numbers into parens. It&#8217;s a <em>haskell</em> thing.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>However purescript doesn&#8217;t generate JUnit style xml output. So we&#8217;ve gone ahead and put in some jasmine tests as well</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-nx">describe</span><span class="tok-p">(</span><span class="tok-s1">&#39;Taylor Purescript Spec&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">return</span> <span class="tok-nx">it</span><span class="tok-p">(</span><span class="tok-s1">&#39;calls, values and instances match&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-kd">var</span> <span class="tok-nx">taylor</span> <span class="tok-o">=</span> <span class="tok-nx">PS</span><span class="tok-p">.</span><span class="tok-nx">TaylorPurescript</span><span class="tok-p">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tok-kd">var</span> <span class="tok-nx">PI</span> <span class="tok-o">=</span> <span class="tok-mf">3.14159265359</span><span class="tok-p">;</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)(</span><span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.25</span><span class="tok-p">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)(</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.5</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)(</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)(</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">4</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">6</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">4</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.707</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.866</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">1.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
  <span class="tok-p">});</span>
<span class="tok-p">});</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is how you pull in Purescript into native javascript. There is the option to use CommonJS or whatever else
is your favorite module system for JS, but we&#8217;re keeping it simple.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is where you blame your favorite mathematician - Gottlob Frege, Moses Schönfinkel, or Haskell Curry.
It is what makes sens to mathematics. And it&#8217;s ugly when we take a programming language where Currying is not a first
class capability.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_clojurescript">Clojurescript</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_typescript">Typescript</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="typescript"><span class="tok-c1">/// &lt;reference path=&quot;../typings/lodash/lodash.d.ts&quot; /&gt;  </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-cm">/**</span>
<span class="tok-cm"> * A factory that offers factorial methods</span>
<span class="tok-cm"> */</span>
<span class="tok-kr">class</span> <span class="tok-nx">TaylorTypescript</span> <span class="tok-p">{</span>

  <span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span>:<span class="tok-kt">number</span><span class="tok-p">,</span> <span class="tok-nx">p</span>:<span class="tok-kt">number</span><span class="tok-p">)</span><span class="tok-o">:</span><span class="tok-kt">number</span> <span class="tok-p">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">p</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">p</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-k">else</span> <span class="tok-k">return</span> <span class="tok-mi">1</span> <span class="tok-o">/</span> <span class="tok-nx">num</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">num</span><span class="tok-p">,</span> <span class="tok-nx">p</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
  <span class="tok-p">}</span>

  <span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">x</span>:<span class="tok-kt">number</span><span class="tok-p">)</span><span class="tok-o">:</span><span class="tok-kt">number</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">0</span> <span class="tok-o">?</span> <span class="tok-nx">1</span> : <span class="tok-kt">x</span> <span class="tok-o">*</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
  <span class="tok-p">}</span>

  <span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">x</span>:<span class="tok-kt">number</span><span class="tok-p">)</span><span class="tok-o">:</span><span class="tok-kt">number</span> <span class="tok-p">{</span>
    <span class="tok-cm">/*</span>
<span class="tok-cm">    return _.chain(_.range(0, 10))</span>
<span class="tok-cm">        .reduce((sum, i) =&gt; sum + this.pow(-1, i) *</span>
<span class="tok-cm">              this.pow(x, i * 2 + 1) / this.fact(i * 2 + 1), 0.0)</span>
<span class="tok-cm">        .value(); </span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="tok-cm">    */</span>
    <span class="tok-k">return</span> <span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">reduce</span><span class="tok-p">(</span>
        <span class="tok-nx">_</span><span class="tok-p">.</span><span class="tok-nx">range</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">10</span><span class="tok-p">),</span>
        <span class="tok-p">(</span><span class="tok-nx">sum</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-o">=&gt;</span> <span class="tok-nx">sum</span> <span class="tok-o">+</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-o">*</span>
              <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">/</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-nx">i</span> <span class="tok-o">*</span> <span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">),</span>
        <span class="tok-mf">0.0</span>
    <span class="tok-p">);</span>
  <span class="tok-p">}</span>

  <span class="tok-kr">static</span> <span class="tok-nx">_instance</span>:<span class="tok-kt">TaylorTypescript</span><span class="tok-p">;</span>

  <span class="tok-kr">static</span> <span class="tok-nx">getInstance() {</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span><span class="tok-p">)</span> <span class="tok-p">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nx">TaylorTypescript</span><span class="tok-p">();</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">_instance</span><span class="tok-p">;</span>
  <span class="tok-p">}</span>

<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is how we tell typescript where to import things</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Typing is optional. There is no int, so everything is a number.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Lodash chaining does not work. It&#8217;s a flaw in the <code>d.ts</code> for it.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The insane littering of <code>this</code> doesn&#8217;t go away.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="typescript"><span class="tok-c1">/// &lt;reference path=&quot;TaylorTypescript.ts&quot; /&gt;</span>
<span class="tok-c1">/// &lt;reference path=&quot;../typings/jasmine/jasmine.d.ts&quot; /&gt;</span>
<span class="tok-nx">describe</span><span class="tok-p">(</span><span class="tok-s1">&#39;Taylor Classic Spec&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">return</span> <span class="tok-nx">it</span><span class="tok-p">(</span><span class="tok-s1">&#39;calls, values and instances match&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-kd">var</span> <span class="tok-nx">taylor</span> <span class="tok-o">=</span> <span class="tok-nx">TaylorTypescript</span><span class="tok-p">.</span><span class="tok-nx">getInstance</span><span class="tok-p">();</span>
    <span class="tok-kd">var</span> <span class="tok-nx">PI</span> <span class="tok-o">=</span> <span class="tok-mf">3.14159265359</span><span class="tok-p">;</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.25</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mf">0.5</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">pow</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">4</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">fact</span><span class="tok-p">(</span><span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBe</span><span class="tok-p">(</span><span class="tok-mi">6</span><span class="tok-p">);</span>

    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">4</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.707</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">3</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.866</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">1.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
    <span class="tok-nx">expect</span><span class="tok-p">(</span><span class="tok-nx">taylor</span><span class="tok-p">.</span><span class="tok-nx">sine</span><span class="tok-p">(</span><span class="tok-nx">PI</span><span class="tok-p">)).</span><span class="tok-nx">toBeCloseTo</span><span class="tok-p">(</span><span class="tok-mf">0.0</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>
  <span class="tok-p">});</span>
<span class="tok-p">});</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-02-22 19:37:24 UTC
</div>
</div>
</body>
</html>